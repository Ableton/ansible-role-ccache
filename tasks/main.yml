---
- name: Fail on unsupported platforms
  fail:
    msg: "This role is not supported on Windows"
  when: ansible_os_family == "Windows"

- include_tasks: "unix/build_sources.yml"
  when: ccache_build_from_sources

- include_tasks: "darwin/install_package.yml"
  when: not ccache_build_from_sources and ansible_os_family == "Darwin"

- include_tasks: "debian/install_package.yml"
  when: not ccache_build_from_sources and ansible_os_family == "Debian"

- include_tasks: "configure.yml"
